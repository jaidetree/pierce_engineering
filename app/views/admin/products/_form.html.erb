<%= form_for( [ :admin, @product ] ) do |f| %>
	<% if @product.errors.any? %>
		<div id="error_explanation">
			<h2><%= pluralize(@product.errors.count, "error") %> prohibited this product from being saved:</h2>

			<ul>
				<% @product.errors.full_messages.each do |msg| %>
					<li><%= msg %></li>
				<% end %>
			</ul>
		</div>
	<% end %>

	<div class="field">
		<%= f.label :name %><br />
		<%= f.text_field :name %>
	</div>
	<div class="field">
		<%= f.label 'Short Description' %><br />
		<%= f.text_area :excerpt %>
	</div>
	<div class="field">
		<%= f.label :content %><br />
		<%= f.text_area :content, :class => 'mceEditor' %>
	</div>
	<div class="field prices-table">
		<%= f.label :prices %><br />
	</div>
	<div class="field product-data">
		<%= f.label :data %><br />
	</div>
	<div class="field">
		<%= f.label :product_category %>
		<%= f.select :product_category_id, ProductCategory.all.collect { |p| [ p.name, p.id ] } %>
	</div>
	<div class="actions">
		<%= f.submit %>
	</div>
<% end %>
<fieldset>
	<legend>Product Images</legend>
	<%= render '/admin/product_images/form' %>
</fieldset>
<script type="text/javascript">
	$(document).ready( function(){ 
		$('.prices-table').dataTable( { 
			hash: <%=raw @product.prices.to_json %>,
			field: 'product[prices]',
			name: 'prices',
			} );
		$('.product-data').dataTable( {
			hash: <%=raw @product.data.to_json %>,
			field: 'product[data]',
			name: 'data'
		} );
	} );
</script>
